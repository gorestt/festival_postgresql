<%- include("../partials/layout_top", { title }) %>
<div class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-3">
  <div>
    <h1 class="h4 mb-1"><%= mode==='create' ? 'Добавить фестиваль' : 'Редактировать фестиваль' %></h1>
    <div class="text-white-50">Заполните карточку фестиваля. Поля можно редактировать позже.</div>
  </div>
  <a class="btn btn-outline-light" href="/festivals"><i class="bi bi-arrow-left me-1"></i>Назад</a>
</div>

<form class="card card-glass shadow-sm" method="post" action="<%= mode==='create' ? '/festivals' : ('/festivals/' + festival.id + '?_method=PUT') %>">
  <div class="card-body p-4 row g-3">
    <div class="col-12">
      <label class="form-label">Название</label>
      <input class="form-control" name="name" value="<%= festival ? festival.name : '' %>" required>
    </div>

    <div class="col-12 col-md-6">
      <label class="form-label">Город</label>
      <input class="form-control" name="city" value="<%= festival ? festival.city : '' %>" required>
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label">Страна</label>
      <input class="form-control" name="country" value="<%= festival ? festival.country : '' %>" required>
    </div>

    <div class="col-6 col-md-3">
      <label class="form-label">Дата начала</label>
      <input type="date" class="form-control" name="start_date" value="<%= festival ? festival.start_date.toISOString().slice(0,10) : '' %>" required>
    </div>
    <div class="col-6 col-md-3">
      <label class="form-label">Дата окончания</label>
      <input type="date" class="form-control" name="end_date" value="<%= festival ? festival.end_date.toISOString().slice(0,10) : '' %>" required>
    </div>
    <div class="col-12 col-md-6">
      <label class="form-label">Жанр</label>
      <input class="form-control" name="genre" value="<%= festival ? festival.genre : '' %>" required placeholder="Rock, EDM, Indie, Jazz...">
    </div>

    <div class="col-12">
      <label class="form-label">Сайт (необязательно)</label>
      <input class="form-control" name="website" value="<%= festival ? (festival.website || '') : '' %>" placeholder="https://...">
    </div>

    <div class="col-12">
      <label class="form-label">Описание</label>
      <textarea class="form-control" name="description" rows="5" placeholder="Краткое описание фестиваля..."><%= festival ? (festival.description || '') : '' %></textarea>
    </div>

    <div class="col-12 d-flex gap-2">
      <button class="btn btn-primary" type="submit"><i class="bi bi-save me-1"></i>Сохранить</button>
      <a class="btn btn-outline-light" href="/festivals">Отмена</a>
    </div>
  </div>
</form>
<%- include("../partials/layout_bottom") %>
